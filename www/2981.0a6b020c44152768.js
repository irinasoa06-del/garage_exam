"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2981],{2981:(y,u,l)=>{l.r(u),l.d(u,{RepairListPageModule:()=>R});var p=l(6895),g=l(433),r=l(12),_=l(5861),m=l(3295),e=l(8256),d=l(2687);function f(n,a){if(1&n&&(e.TgZ(0,"div",19),e._UZ(1,"ion-icon",25),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(3),e.hij("Slot ",t.slot_garage,"")}}function x(n,a){if(1&n&&e._UZ(0,"ion-progress-bar",26),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("value",t.progression/100)("color",i.getStatutColor(t.statut))}}function h(n,a){if(1&n&&(e.TgZ(0,"p",27),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" Progression: ",t.progression,"% ")}}function Z(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"ion-card",11),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.voirDetails(s))}),e.TgZ(1,"ion-card-header")(2,"div",12),e._UZ(3,"ion-icon",13),e.TgZ(4,"div",14)(5,"ion-card-title"),e._uU(6),e.qZA(),e.TgZ(7,"ion-card-subtitle"),e._uU(8),e.TgZ(9,"ion-button",15),e.NdJ("click",function(o){const c=e.CHM(t).$implicit,O=e.oxw(2);return e.KtG(O.voirVoiture(c.voiture_id,o))}),e._UZ(10,"ion-icon",16),e.qZA()()(),e.TgZ(11,"ion-badge",17),e._uU(12),e.qZA()()(),e.TgZ(13,"ion-card-content")(14,"div",18)(15,"div",19),e._UZ(16,"ion-icon",20),e.TgZ(17,"span"),e._uU(18),e.qZA()(),e.TgZ(19,"div",19),e._UZ(20,"ion-icon",21),e.TgZ(21,"span"),e._uU(22),e.qZA()(),e.YNc(23,f,4,1,"div",22),e.qZA(),e.YNc(24,x,1,2,"ion-progress-bar",23),e.YNc(25,h,2,1,"p",24),e.qZA()()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(3),e.Q6J("color",i.getStatutColor(t.statut)),e.xp6(3),e.Oqu(t.type_intervention.nom),e.xp6(2),e.AsE(" ",t.voiture.marque," ",t.voiture.modele," "),e.xp6(3),e.Q6J("color",i.getStatutColor(t.statut)),e.xp6(1),e.hij(" ",i.getStatutLabel(t.statut)," "),e.xp6(6),e.Oqu(i.formatDuree(t.type_intervention.duree_secondes||0)),e.xp6(4),e.hij("",t.type_intervention.prix_unitaire," Ar"),e.xp6(1),e.Q6J("ngIf",t.slot_garage),e.xp6(1),e.Q6J("ngIf","en_cours"===t.statut),e.xp6(1),e.Q6J("ngIf","en_cours"===t.statut)}}function v(n,a){if(1&n&&(e.TgZ(0,"ion-list"),e.YNc(1,Z,26,11,"ion-card",10),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.filteredReparations)}}function C(n,a){1&n&&(e.TgZ(0,"p"),e._uU(1,"Vous n'avez pas encore de r\xe9parations"),e.qZA())}function P(n,a){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij("Aucune r\xe9paration ",t.getStatutLabel(t.selectedFilter).toLowerCase(),"")}}function T(n,a){if(1&n&&(e.TgZ(0,"div",28),e._UZ(1,"ion-icon",29),e.TgZ(2,"h2"),e._uU(3,"Aucune r\xe9paration"),e.qZA(),e.YNc(4,C,2,0,"p",8),e.YNc(5,P,2,1,"p",8),e.qZA()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngIf","all"===t.selectedFilter),e.xp6(1),e.Q6J("ngIf","all"!==t.selectedFilter)}}const M=[{path:"",component:(()=>{class n{constructor(t,i,o,s){this.reparationService=t,this.router=i,this.loadingController=o,this.alertController=s,this.reparations=[],this.filteredReparations=[],this.selectedFilter="all"}ngOnInit(){this.loadReparations()}ionViewWillEnter(){this.loadReparations()}loadReparations(){var t=this;return(0,_.Z)(function*(){const i=yield t.loadingController.create({message:"Chargement..."});var o;yield i.present(),t.reparationService.getMesReparations().subscribe({next:o=>{t.reparations=o,t.applyFilter(t.selectedFilter),i.dismiss()},error:(o=(0,_.Z)(function*(s){i.dismiss(),yield(yield t.alertController.create({header:"Erreur",message:"Impossible de charger les r\xe9parations",buttons:["OK"]})).present()}),function(c){return o.apply(this,arguments)})})})()}filterChanged(t){this.selectedFilter=t.detail.value,this.applyFilter(this.selectedFilter)}applyFilter(t){this.filteredReparations="all"===t?this.reparations:this.reparations.filter(i=>i.statut===t)}getStatutColor(t){switch(t){case"en_attente":return"warning";case"en_cours":return"primary";case"terminee":return"success";default:return"medium"}}getStatutLabel(t){switch(t){case"en_attente":return"En attente";case"en_cours":return"En cours";case"terminee":return"Termin\xe9e";default:return t}}formatDuree(t){const i=Math.floor(t/3600),o=Math.floor(t%3600/60);return i>0?`${i}h ${o}min`:`${o}min`}voirDetails(t){this.router.navigate(["/repairs",t.reparation_id])}voirVoiture(t,i){i.stopPropagation(),this.router.navigate(["/cars",t])}doRefresh(t){this.reparationService.getMesReparations().subscribe({next:i=>{this.reparations=i,this.applyFilter(this.selectedFilter),t.target.complete()},error:()=>{t.target.complete()}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.L),e.Y36(d.F0),e.Y36(r.HT),e.Y36(r.Br))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-repair-list"]],decls:25,vars:3,consts:[["slot","start"],["defaultHref","/cars"],[3,"ngModel","ngModelChange","ionChange"],["value","all"],["value","en_attente"],["value","en_cours"],["value","terminee"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],["class","empty-state",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"repair-header"],["name","construct","size","large",3,"color"],[1,"repair-info"],["size","small","fill","clear",3,"click"],["slot","icon-only","name","chevron-forward"],[3,"color"],[1,"repair-details"],[1,"detail-item"],["name","time-outline"],["name","cash-outline"],["class","detail-item",4,"ngIf"],[3,"value","color",4,"ngIf"],["class","progression-text",4,"ngIf"],["name","location-outline"],[3,"value","color"],[1,"progression-text"],[1,"empty-state"],["name","construct-outline","size","large"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-back-button",1),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Mes R\xe9parations"),e.qZA()(),e.TgZ(6,"ion-toolbar")(7,"ion-segment",2),e.NdJ("ngModelChange",function(s){return i.selectedFilter=s})("ionChange",function(s){return i.filterChanged(s)}),e.TgZ(8,"ion-segment-button",3)(9,"ion-label"),e._uU(10,"Toutes"),e.qZA()(),e.TgZ(11,"ion-segment-button",4)(12,"ion-label"),e._uU(13,"En attente"),e.qZA()(),e.TgZ(14,"ion-segment-button",5)(15,"ion-label"),e._uU(16,"En cours"),e.qZA()(),e.TgZ(17,"ion-segment-button",6)(18,"ion-label"),e._uU(19,"Termin\xe9es"),e.qZA()()()()(),e.TgZ(20,"ion-content")(21,"ion-refresher",7),e.NdJ("ionRefresh",function(s){return i.doRefresh(s)}),e._UZ(22,"ion-refresher-content"),e.qZA(),e.YNc(23,v,2,1,"ion-list",8),e.YNc(24,T,6,2,"div",9),e.qZA()),2&t&&(e.xp6(7),e.Q6J("ngModel",i.selectedFilter),e.xp6(16),e.Q6J("ngIf",i.filteredReparations.length>0),e.xp6(1),e.Q6J("ngIf",0===i.filteredReparations.length))},dependencies:[p.sg,p.O5,g.JJ,g.On,r.yp,r.YG,r.Sm,r.PM,r.FN,r.Zi,r.tO,r.Dq,r.W2,r.Gu,r.gu,r.Q$,r.q_,r.X7,r.nJ,r.Wo,r.cJ,r.GO,r.wd,r.sr,r.QI,r.oU],styles:["ion-card[_ngcontent-%COMP%]{cursor:pointer;margin:12px}ion-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #00000026}.repair-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.repair-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:40px}.repair-header[_ngcontent-%COMP%]   .repair-info[_ngcontent-%COMP%]{flex:1}.repair-header[_ngcontent-%COMP%]   .repair-info[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.repair-details[_ngcontent-%COMP%]{display:flex;gap:16px;margin:12px 0;flex-wrap:wrap}.repair-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:14px}.repair-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:var(--ion-color-medium)}.progression-text[_ngcontent-%COMP%]{margin-top:8px;font-size:13px;color:var(--ion-color-medium);text-align:center}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:80px;color:var(--ion-color-medium);margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--ion-color-dark);margin-bottom:8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-medium)}"]}),n})()}];let R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,g.u5,r.Pc,d.Bz.forChild(M)]}),n})()}}]);