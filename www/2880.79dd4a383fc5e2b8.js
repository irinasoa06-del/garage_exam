"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2880],{2880:(O,d,s)=>{s.r(d),s.d(d,{CarListPageModule:()=>Z});var g=s(6895),m=s(433),i=s(12),u=s(5861),f=s(506),t=s(8256),_=s(2687);function v(o,c){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.annee)}}function h(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item-sliding")(1,"ion-item",18),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.voirDetails(a))}),t.TgZ(2,"ion-avatar",19),t._UZ(3,"ion-icon",20),t.qZA(),t.TgZ(4,"ion-label")(5,"h2"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA(),t.YNc(9,v,2,1,"p",13),t.qZA(),t.TgZ(10,"ion-badge",21),t._uU(11),t.qZA()(),t.TgZ(12,"ion-item-options",22)(13,"ion-item-option",23),t.NdJ("click",function(r){const l=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.supprimerVoiture(l,r))}),t._UZ(14,"ion-icon",24),t.qZA()()()}if(2&o){const e=c.$implicit,n=t.oxw(2);t.xp6(6),t.AsE("",e.marque," ",e.modele,""),t.xp6(2),t.Oqu(e.immatriculation),t.xp6(1),t.Q6J("ngIf",e.annee),t.xp6(1),t.Q6J("color",n.getStatutColor(e.statut)),t.xp6(1),t.hij(" ",n.getStatutLabel(e.statut)," ")}}function C(o,c){if(1&o&&(t.TgZ(0,"ion-list"),t.YNc(1,h,15,6,"ion-item-sliding",17),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.voitures)}}function x(o,c){1&o&&(t.TgZ(0,"div",25),t._UZ(1,"ion-icon",26),t.TgZ(2,"h2"),t._uU(3,"Aucune voiture"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"Ajoutez votre premi\xe8re voiture pour commencer"),t.qZA()())}const P=[{path:"",component:(()=>{class o{constructor(e,n,r,a){this.voitureService=e,this.router=n,this.loadingController=r,this.alertController=a,this.voitures=[],this.isLoading=!1,this.statsEnAttente=0,this.statsEnReparation=0,this.statsPrete=0}ngOnInit(){this.loadVoitures()}ionViewWillEnter(){this.loadVoitures()}loadVoitures(){var e=this;return(0,u.Z)(function*(){const n=yield e.loadingController.create({message:"Chargement..."});var r;yield n.present(),e.voitureService.getMesVoitures().subscribe({next:r=>{e.voitures=r,e.calculerStats(),n.dismiss()},error:(r=(0,u.Z)(function*(a){n.dismiss(),yield(yield e.alertController.create({header:"Erreur",message:"Impossible de charger vos voitures",buttons:["OK"]})).present()}),function(l){return r.apply(this,arguments)})})})()}calculerStats(){this.statsEnAttente=this.voitures.filter(e=>"en_attente"===e.statut).length,this.statsEnReparation=this.voitures.filter(e=>"en_reparation"===e.statut).length,this.statsPrete=this.voitures.filter(e=>"prete"===e.statut).length}getStatutColor(e){switch(e){case"en_attente":return"warning";case"en_reparation":return"primary";case"prete":return"success";default:return"medium"}}getStatutLabel(e){switch(e){case"en_attente":return"En attente";case"en_reparation":return"En r\xe9paration";case"prete":return"Pr\xeate";case"recuperee":return"R\xe9cup\xe9r\xe9e";default:return e}}ajouterVoiture(){this.router.navigate(["/cars/add"])}voirDetails(e){this.router.navigate(["/cars",e.voiture_id])}supprimerVoiture(e,n){var r=this;return(0,u.Z)(function*(){n.stopPropagation(),yield(yield r.alertController.create({header:"Confirmer la suppression",message:`Voulez-vous vraiment supprimer ${e.marque} ${e.modele} ?`,buttons:[{text:"Annuler",role:"cancel"},{text:"Supprimer",role:"destructive",handler:()=>{r.confirmerSuppression(e.voiture_id)}}]})).present()})()}confirmerSuppression(e){var n=this;return(0,u.Z)(function*(){const r=yield n.loadingController.create({message:"Suppression..."});var a;yield r.present(),n.voitureService.deleteVoiture(e).subscribe({next:()=>{r.dismiss(),n.loadVoitures()},error:(a=(0,u.Z)(function*(l){r.dismiss(),yield(yield n.alertController.create({header:"Erreur",message:"Impossible de supprimer la voiture",buttons:["OK"]})).present()}),function(p){return a.apply(this,arguments)})})})()}doRefresh(e){this.voitureService.getMesVoitures().subscribe({next:n=>{this.voitures=n,this.calculerStats(),e.target.complete()},error:()=>{e.target.complete()}})}goToProfile(){this.router.navigate(["/profile"])}goToNotifications(){this.router.navigate(["/notifications"])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f.E),t.Y36(_.F0),t.Y36(i.HT),t.Y36(i.Br))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-car-list"]],decls:37,vars:5,consts:[["slot","end"],[3,"click"],["name","notifications-outline"],["name","person-outline"],["slot","fixed",3,"ionRefresh"],[1,"stats-container"],[1,"stat-card"],["name","time-outline","color","warning"],[1,"stat-value"],[1,"stat-label"],["name","construct-outline","color","primary"],["name","checkmark-circle-outline","color","success"],[1,"content-container"],[4,"ngIf"],["class","empty-state",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["name","add"],[4,"ngFor","ngForOf"],["button","",3,"click"],["slot","start"],["name","car-sport","size","large"],["slot","end",3,"color"],["side","end"],["color","danger",3,"click"],["slot","icon-only","name","trash"],[1,"empty-state"],["name","car-sport-outline","size","large"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Mes Voitures"),t.qZA(),t.TgZ(4,"ion-buttons",0)(5,"ion-button",1),t.NdJ("click",function(){return n.goToNotifications()}),t._UZ(6,"ion-icon",2),t.qZA(),t.TgZ(7,"ion-button",1),t.NdJ("click",function(){return n.goToProfile()}),t._UZ(8,"ion-icon",3),t.qZA()()()(),t.TgZ(9,"ion-content")(10,"ion-refresher",4),t.NdJ("ionRefresh",function(a){return n.doRefresh(a)}),t._UZ(11,"ion-refresher-content"),t.qZA(),t.TgZ(12,"div",5)(13,"div",6),t._UZ(14,"ion-icon",7),t.TgZ(15,"div",8),t._uU(16),t.qZA(),t.TgZ(17,"div",9),t._uU(18,"En attente"),t.qZA()(),t.TgZ(19,"div",6),t._UZ(20,"ion-icon",10),t.TgZ(21,"div",8),t._uU(22),t.qZA(),t.TgZ(23,"div",9),t._uU(24,"En r\xe9paration"),t.qZA()(),t.TgZ(25,"div",6),t._UZ(26,"ion-icon",11),t.TgZ(27,"div",8),t._uU(28),t.qZA(),t.TgZ(29,"div",9),t._uU(30,"Pr\xeates"),t.qZA()()(),t.TgZ(31,"div",12),t.YNc(32,C,2,1,"ion-list",13),t.YNc(33,x,6,0,"div",14),t.qZA(),t.TgZ(34,"ion-fab",15)(35,"ion-fab-button",1),t.NdJ("click",function(){return n.ajouterVoiture()}),t._UZ(36,"ion-icon",16),t.qZA()()()),2&e&&(t.xp6(16),t.Oqu(n.statsEnAttente),t.xp6(6),t.Oqu(n.statsEnReparation),t.xp6(6),t.Oqu(n.statsPrete),t.xp6(4),t.Q6J("ngIf",n.voitures.length>0),t.xp6(1),t.Q6J("ngIf",0===n.voitures.length&&!n.isLoading))},dependencies:[g.sg,g.O5,i.BJ,i.yp,i.YG,i.Sm,i.W2,i.IJ,i.W4,i.Gu,i.gu,i.Ie,i.u8,i.IK,i.td,i.Q$,i.q_,i.nJ,i.Wo,i.wd,i.sr],styles:[".stats-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:16px;background:var(--ion-color-light);gap:12px}.stats-container[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{flex:1;background:white;border-radius:12px;padding:16px;text-align:center;box-shadow:0 2px 4px #0000001a}.stats-container[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px;margin-bottom:8px}.stats-container[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--ion-color-dark);margin-bottom:4px}.stats-container[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium)}.content-container[_ngcontent-%COMP%]{padding:16px 0}.content-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 16px;margin-bottom:8px}.content-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{width:56px;height:56px;display:flex;align-items:center;justify-content:center;background:var(--ion-color-light);border-radius:12px}.content-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px;color:var(--ion-color-primary)}.content-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;font-size:16px;margin-bottom:4px}.content-container[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:var(--ion-color-medium)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:80px;color:var(--ion-color-medium);margin-bottom:20px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:var(--ion-color-dark);margin-bottom:8px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--ion-color-medium)}ion-fab-button[_ngcontent-%COMP%]{--box-shadow: 0 4px 16px rgba(var(--ion-color-primary-rgb), .4)}"]}),o})()}];let Z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.ez,m.u5,i.Pc,_.Bz.forChild(P)]}),o})()}}]);