"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3506],{3506:(O,u,c)=>{c.r(u),c.d(u,{RepairDetailPageModule:()=>M});var l=c(6895),f=c(433),i=c(12),d=c(5861),m=c(3295),e=c(8256),p=c(2687);function _(n,a){if(1&n&&(e.TgZ(0,"div",23)(1,"h3"),e._uU(2,"Progression"),e.qZA(),e._UZ(3,"ion-progress-bar",24),e.TgZ(4,"p",25),e._uU(5),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("value",t.reparation.progression/100)("color",t.getStatutColor(t.reparation.statut)),e.xp6(2),e.hij("",t.reparation.progression,"%")}}function v(n,a){if(1&n&&(e.TgZ(0,"div",10),e._UZ(1,"ion-icon",26),e.TgZ(2,"div")(3,"p",12),e._uU(4,"Slot garage"),e.qZA(),e.TgZ(5,"p",13),e._uU(6),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(6),e.hij("Slot ",t.reparation.slot_garage,"")}}function Z(n,a){1&n&&(e.TgZ(0,"ion-card",27)(1,"ion-card-content")(2,"div",28),e._UZ(3,"ion-icon",29),e.TgZ(4,"p"),e._uU(5,"Cette r\xe9paration est en attente d'un slot disponible"),e.qZA()()()())}function h(n,a){1&n&&(e.TgZ(0,"ion-card",30)(1,"ion-card-content")(2,"div",28),e._UZ(3,"ion-icon",31),e.TgZ(4,"p"),e._uU(5,"R\xe9paration en cours. Vous serez notifi\xe9 une fois termin\xe9e."),e.qZA()()()())}function x(n,a){1&n&&(e.TgZ(0,"ion-card",32)(1,"ion-card-content")(2,"div",28),e._UZ(3,"ion-icon",33),e.TgZ(4,"p"),e._uU(5,"R\xe9paration termin\xe9e ! Vous pouvez r\xe9cup\xe9rer votre v\xe9hicule apr\xe8s paiement."),e.qZA()()()())}function P(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"ion-card")(2,"ion-card-header")(3,"div",4),e._UZ(4,"ion-icon",5),e.TgZ(5,"div")(6,"ion-card-title"),e._uU(7),e.qZA(),e.TgZ(8,"ion-card-subtitle"),e._uU(9),e.qZA()(),e.TgZ(10,"ion-badge",6),e._uU(11),e.qZA()()(),e.TgZ(12,"ion-card-content"),e.YNc(13,_,6,3,"div",7),e.TgZ(14,"div",8)(15,"h3"),e._uU(16,"Informations"),e.qZA(),e.TgZ(17,"div",9)(18,"div",10),e._UZ(19,"ion-icon",11),e.TgZ(20,"div")(21,"p",12),e._uU(22,"Dur\xe9e estim\xe9e"),e.qZA(),e.TgZ(23,"p",13),e._uU(24),e.qZA()()(),e.TgZ(25,"div",10),e._UZ(26,"ion-icon",14),e.TgZ(27,"div")(28,"p",12),e._uU(29,"Prix"),e.qZA(),e.TgZ(30,"p",13),e._uU(31),e.qZA()()(),e.YNc(32,v,7,1,"div",15),e.qZA()()()(),e.TgZ(33,"ion-card",16),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.voirVoiture())}),e.TgZ(34,"ion-card-header")(35,"ion-card-title"),e._UZ(36,"ion-icon",17),e._uU(37," V\xe9hicule concern\xe9 "),e.qZA()(),e.TgZ(38,"ion-card-content")(39,"div",18)(40,"div")(41,"h3"),e._uU(42),e.qZA(),e.TgZ(43,"p"),e._uU(44),e.qZA()(),e._UZ(45,"ion-icon",19),e.qZA()()(),e.YNc(46,Z,6,0,"ion-card",20),e.YNc(47,h,6,0,"ion-card",21),e.YNc(48,x,6,0,"ion-card",22),e.qZA()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("color",t.getStatutColor(t.reparation.statut)),e.xp6(3),e.Oqu(t.reparation.type_intervention.nom),e.xp6(2),e.Oqu(t.reparation.type_intervention.description),e.xp6(1),e.Q6J("color",t.getStatutColor(t.reparation.statut)),e.xp6(1),e.hij(" ",t.getStatutLabel(t.reparation.statut)," "),e.xp6(2),e.Q6J("ngIf","en_cours"===t.reparation.statut),e.xp6(11),e.Oqu(t.formatDuree(t.reparation.type_intervention.duree_secondes||0)),e.xp6(7),e.hij("",t.reparation.type_intervention.prix_unitaire," Ar"),e.xp6(1),e.Q6J("ngIf",t.reparation.slot_garage),e.xp6(10),e.AsE("",t.reparation.voiture.marque," ",t.reparation.voiture.modele,""),e.xp6(2),e.Oqu(t.reparation.voiture.immatriculation),e.xp6(2),e.Q6J("ngIf","en_attente"===t.reparation.statut),e.xp6(1),e.Q6J("ngIf","en_cours"===t.reparation.statut),e.xp6(1),e.Q6J("ngIf","terminee"===t.reparation.statut)}}const C=[{path:"",component:(()=>{class n{constructor(t,r,o,s,g){this.route=t,this.router=r,this.reparationService=o,this.loadingController=s,this.alertController=g}ngOnInit(){this.reparationId=parseInt(this.route.snapshot.paramMap.get("id")||"0"),this.reparationId&&this.loadReparation()}loadReparation(){var t=this;return(0,d.Z)(function*(){const r=yield t.loadingController.create({message:"Chargement..."});var o;yield r.present(),t.reparationService.getReparationById(t.reparationId).subscribe({next:o=>{t.reparation=o,r.dismiss()},error:(o=(0,d.Z)(function*(s){r.dismiss(),yield(yield t.alertController.create({header:"Erreur",message:"Impossible de charger les d\xe9tails de la r\xe9paration",buttons:["OK"]})).present(),t.router.navigate(["/repairs"])}),function(g){return o.apply(this,arguments)})})})()}getStatutColor(t){switch(t){case"en_attente":return"warning";case"en_cours":return"primary";case"terminee":return"success";default:return"medium"}}getStatutLabel(t){switch(t){case"en_attente":return"En attente";case"en_cours":return"En cours";case"terminee":return"Termin\xe9e";default:return t}}formatDuree(t){const r=Math.floor(t/3600),o=Math.floor(t%3600/60);return r>0?`${r}h ${o}min`:`${o}min`}formatDate(t){return new Date(t).toLocaleString("fr-FR")}voirVoiture(){var t;null!==(t=this.reparation)&&void 0!==t&&t.voiture_id&&this.router.navigate(["/cars",this.reparation.voiture_id])}doRefresh(t){this.reparationService.getReparationById(this.reparationId).subscribe({next:r=>{this.reparation=r,t.target.complete()},error:()=>{t.target.complete()}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.gz),e.Y36(p.F0),e.Y36(m.L),e.Y36(i.HT),e.Y36(i.Br))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-repair-detail"]],decls:10,vars:1,consts:[["slot","start"],["defaultHref","/repairs"],["slot","fixed",3,"ionRefresh"],[4,"ngIf"],[1,"repair-main-header"],["name","construct","size","large",3,"color"],[3,"color"],["class","progress-section",4,"ngIf"],[1,"info-section"],[1,"info-grid"],[1,"info-item"],["name","time-outline"],[1,"label"],[1,"value"],["name","cash-outline"],["class","info-item",4,"ngIf"],["button","",3,"click"],["name","car-sport"],[1,"car-info"],["name","chevron-forward"],["color","warning",4,"ngIf"],["color","primary",4,"ngIf"],["color","success",4,"ngIf"],[1,"progress-section"],[3,"value","color"],[1,"progression-value"],["name","location-outline"],["color","warning"],[1,"status-message"],["name","time"],["color","primary"],["name","construct"],["color","success"],["name","checkmark-circle"]],template:function(t,r){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-back-button",1),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"D\xe9tails R\xe9paration"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-refresher",2),e.NdJ("ionRefresh",function(s){return r.doRefresh(s)}),e._UZ(8,"ion-refresher-content"),e.qZA(),e.YNc(9,P,49,15,"div",3),e.qZA()),2&t&&(e.xp6(9),e.Q6J("ngIf",r.reparation))},dependencies:[l.O5,i.yp,i.Sm,i.PM,i.FN,i.Zi,i.tO,i.Dq,i.W2,i.Gu,i.gu,i.X7,i.nJ,i.Wo,i.wd,i.sr,i.oU],styles:[".repair-main-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.repair-main-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:48px}.repair-main-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1}.progress-section[_ngcontent-%COMP%]{margin:20px 0}.progress-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:12px}.progress-section[_ngcontent-%COMP%]   .progression-value[_ngcontent-%COMP%]{text-align:center;margin-top:8px;font-size:18px;font-weight:600;color:var(--ion-color-primary)}.info-section[_ngcontent-%COMP%]{margin-top:20px}.info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:16px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:16px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:flex-start}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--ion-color-primary);margin-top:4px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium);margin:0 0 4px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;font-weight:600;margin:0}.car-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.car-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin:0 0 4px}.car-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--ion-color-medium)}.car-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--ion-color-medium)}.status-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:#fff}.status-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px}.status-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;flex:1}"]}),n})()}];let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.ez,f.u5,i.Pc,p.Bz.forChild(C)]}),n})()}}]);